<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="theme-color" content="#1994e6">
  <title>CareTrack Pro · Enfermería (PWA)</title>
  <link rel="manifest" href="manifest.webmanifest">
  <link rel="icon" sizes="192x192" href="assets/icons/icon-192.png">
  <link rel="apple-touch-icon" href="assets/icons/icon-192.png">
  <meta name="description" content="Registro rápido de enfermería: pacientes, signos vitales, medicación, notas, balance hídrico y tareas.">
  <style>html{scroll-behavior:smooth}</style>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <header class="topbar">
    <div class="brand">
      <div class="logo"></div>
      <div class="brand-text">
        <b>CareTrack Pro</b>
        <small>Módulo de Enfermería</small>
      </div>
    </div>
    <nav class="actions">
      <button id="btn-export" class="btn">Exportar</button>
      <label class="btn filelike">Importar
        <input id="import-file" type="file" accept="application/json">
      </label>
      <button id="btn-print" class="btn">Imprimir</button>
      <button id="btn-install" class="btn" hidden>Instalar</button>
    </nav>
  </header>

  <main class="container">
    <section class="toolbar card">
      <div class="field">
        <label>Profesional</label>
        <input id="nurse-name" placeholder="Nombre y apellido">
      </div>
      <div class="field">
        <label>Paciente</label>
        <select id="patient-select"></select>
      </div>
      <button id="btn-new-patient" class="btn primary">+ Nuevo paciente</button>
      <div class="grow"></div>
      <label class="swap">
        <input id="unit-toggle" type="checkbox"> <span>°C / °F</span>
      </label>
      <label class="swap">
        <input id="lang-toggle" type="checkbox"> <span>ES / EN</span>
      </label>
    </section>

    <section class="grid">
      <section class="card col-span-2" id="vitals-card">
        <header class="card-head">
          <h2>Signos vitales</h2>
          <div id="vitals-last" class="muted"></div>
        </header>
        <div class="grid two">
          <div class="field"><label>Temp (<span id="lbl-temp-unit">°C</span>)</label><input id="v-temp" type="number" step="0.1" placeholder="36.7"></div>
          <div class="field"><label>Pulso (lpm)</label><input id="v-hr" type="number" placeholder="72"></div>
          <div class="field"><label>PA Sist. (mmHg)</label><input id="v-sys" type="number" placeholder="120"></div>
          <div class="field"><label>PA Diast. (mmHg)</label><input id="v-dia" type="number" placeholder="80"></div>
          <div class="field"><label>SpO₂ (%)</label><input id="v-spo2" type="number" placeholder="98"></div>
          <div class="field"><label>FR (rpm)</label><input id="v-rr" type="number" placeholder="16"></div>
          <div class="field"><label>Dolor (0–10)</label><input id="v-pain" type="number" min="0" max="10" placeholder="0"></div>
          <div class="field"><label>Glasgow (3–15)</label><input id="v-gcs" type="number" min="3" max="15" placeholder="15"></div>
          <div class="field col-span-2"><label>Notas</label><textarea id="v-notes" rows="2" placeholder="Observaciones"></textarea></div>
        </div>
        <div class="row end">
          <button id="btn-add-vital" class="btn primary">Guardar</button>
          <button id="btn-clear-vital" class="btn">Limpiar</button>
        </div>
        <div class="table-wrap">
          <table class="tbl" aria-label="Tabla de signos vitales">
            <thead><tr><th>Fecha</th><th>Hora</th><th>Temp</th><th>HR</th><th>PA</th><th>SpO₂</th><th>FR</th><th>Dolor</th><th>GCS</th><th>Notas</th></tr></thead>
            <tbody id="vitals-tbody"></tbody>
          </table>
        </div>
        <div class="row between">
          <div id="ews-chip" class="chip">EWS: 0</div>
          <div class="pager">
            <button id="vitals-prev" class="btn small">◀</button>
            <span id="vitals-page" class="muted"></span>
            <button id="vitals-next" class="btn small">▶</button>
          </div>
        </div>
        <canvas id="vitals-chart" height="120" aria-label="Gráfico de temperatura"></canvas>
      </section>

      <aside class="card" id="alerts-card">
        <h2>Alertas clínicas</h2>
        <ul id="alerts-list" class="list"></ul>
      </aside>

      <section class="card col-span-2">
        <header class="card-head"><h2>Administración de medicamentos</h2></header>
        <div class="grid six">
          <input id="m-name" placeholder="Medicamento">
          <input id="m-dose" placeholder="Dosis (ej. 500 mg)">
          <select id="m-route"><option>Oral</option><option>IV</option><option>IM</option><option>SC</option></select>
          <input id="m-freq" placeholder="Frecuencia">
          <input id="m-time" type="time">
          <select id="m-status"><option>Programado</option><option>Administrado</option><option>Omitido</option></select>
        </div>
        <div class="row end"><button id="btn-add-med" class="btn primary">Agregar</button></div>
        <div class="table-wrap">
          <table class="tbl" aria-label="Tabla de medicación">
            <thead><tr><th>Fecha</th><th>Hora</th><th>Medicamento</th><th>Dosis</th><th>Vía</th><th>Frecuencia</th><th>Estado</th><th></th></tr></thead>
            <tbody id="meds-tbody"></tbody>
          </table>
        </div>
        <div class="row end pager">
          <button id="meds-prev" class="btn small">◀</button>
          <span id="meds-page" class="muted"></span>
          <button id="meds-next" class="btn small">▶</button>
        </div>
      </section>

      <section class="card">
        <div class="row between">
          <h2>Notas de enfermería</h2>
          <select id="notes-filter">
            <option value="all">Todas</option>
            <option value="medication">Medicamentos</option>
            <option value="condition">Condición</option>
            <option value="feedback">Feedback</option>
          </select>
        </div>
        <textarea id="note-text" rows="3" placeholder="Escribe una nota..."></textarea>
        <div class="row gap">
          <select id="note-type">
            <option value="other">Nota</option>
            <option value="medication">Medicamentos</option>
            <option value="condition">Condición</option>
            <option value="feedback">Feedback</option>
          </select>
          <button id="btn-add-note" class="btn primary">Guardar nota</button>
        </div>
        <ul id="notes-list" class="list"></ul>
      </section>

      <section class="card">
        <h2>Balance hídrico · 24 h</h2>
        <div class="grid two">
          <div class="field"><label>Ingesta (ml)</label><input id="f-in" type="number" placeholder="0"></div>
          <div class="field"><label>Egreso (ml)</label><input id="f-out" type="number" placeholder="0"></div>
        </div>
        <div class="row end"><button id="btn-add-fluid" class="btn primary">Agregar registro</button></div>
        <div class="muted">Neto: <b id="fluid-net">0</b> ml</div>
        <ul id="fluid-list" class="list"></ul>
      </section>

      <section class="card col-span-3">
        <div class="row between">
          <h2>Pacientes</h2>
          <button id="btn-edit-patient" class="btn">Editar seleccionado</button>
        </div>
        <div class="table-wrap">
          <table class="tbl" aria-label="Tabla de pacientes">
            <thead><tr><th>ID</th><th>Nombre</th><th>Edad</th><th>Condición</th><th>Alergias</th><th></th></tr></thead>
            <tbody id="patients-tbody"></tbody>
          </table>
        </div>
      </section>

      <section class="card col-span-3">
        <div class="row between"><h2>Tareas</h2><div class="muted">Pendientes del turno</div></div>
        <div class="row gap">
          <input id="task-text" placeholder="Ej.: Control de vía periférica 14:00">
          <button id="btn-add-task" class="btn primary">Agregar</button>
        </div>
        <ul id="tasks-list" class="list"></ul>
      </section>
    </section>
  </main>

  <!-- Modal Paciente -->
  <dialog id="patient-modal" class="modal">
    <form method="dialog" class="modal-body">
      <h3 id="patient-modal-title">Nuevo paciente</h3>
      <div class="grid two">
        <input id="p-id" placeholder="ID (ej. P-001)" required>
        <input id="p-name" placeholder="Nombre" required>
        <input id="p-age" type="number" placeholder="Edad" required>
        <input id="p-cond" placeholder="Condición" required>
        <input id="p-allerg" placeholder="Alergias">
      </div>
      <div class="row end gap">
        <button class="btn" value="cancel">Cancelar</button>
        <button id="patient-modal-save" class="btn primary" value="default">Guardar</button>
      </div>
    </form>
  </dialog>

  <footer class="footer">
    <small>Hecho por David Díaz · CareTrack Pro</small>
  </footer>

  <script type="module" src="app.js"></script>
</body>
</html>
