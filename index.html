<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>SaludPro · Plataforma Clínica Avanzada</title>
  <link href="https://fonts.googleapis.com/css2?family=Google+Sans:wght@400;500;700&family=Google+Sans+Text:wght@400;500&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" rel="stylesheet"/>
  <style>
    :root {
      /* Google Design System Colors */
      --grey-0: #fff;
      --grey-50: #f8f9fa;
      --grey-100: #f1f3f4;
      --grey-200: #e8eaed;
      --grey-300: #dadce0;
      --grey-400: #bdc1c6;
      --grey-500: #9aa0a6;
      --grey-600: #80868b;
      --grey-700: #5f6368;
      --grey-800: #3c4043;
      --grey-900: #202124;
      --grey-1000: #060606;
      
      --blue-50: #e8f0fe;
      --blue-100: #d2e3fc;
      --blue-200: #aecbfa;
      --blue-300: #8ab4f8;
      --blue-400: #669df6;
      --blue-500: #4285f4;
      --blue-600: #1a73e8;
      --blue-700: #1967d2;
      --blue-800: #185abc;
      --blue-900: #174ea6;
      
      --red-50: #fce8e6;
      --red-100: #fad2cf;
      --red-200: #f6aea9;
      --red-300: #f28b82;
      --red-400: #ee675c;
      --red-500: #ea4335;
      --red-600: #d93025;
      --red-700: #c5221f;
      --red-800: #b31412;
      --red-900: #a50e0e;
      
      --yellow-50: #fef7e0;
      --yellow-100: #feefc3;
      --yellow-200: #fde293;
      --yellow-300: #fdd663;
      --yellow-400: #fcc934;
      --yellow-500: #fbbc04;
      --yellow-600: #f9ab00;
      --yellow-700: #f29900;
      --yellow-800: #ea8600;
      --yellow-900: #e37400;
      
      --green-50: #e6f4ea;
      --green-100: #ceead6;
      --green-200: #a8dab5;
      --green-300: #81c995;
      --green-400: #58b776;
      --green-500: #34a853;
      --green-600: #2d8943;
      --green-700: #266d35;
      --green-800: #1f5128;
      --green-900: #18351b;
      
      /* Theme-specific variables */
      --background: var(--grey-50);
      --surface: var(--grey-0);
      --surface-container: var(--grey-50);
      --surface-container-bright: var(--grey-50);
      --surface-media: var(--grey-100);
      --on-surface: var(--grey-900);
      --on-surface-variant: var(--grey-700);
      --outline: var(--grey-300);
      --outline-variant: var(--grey-400);
      
      /* Roles */
      --roles-primary-primary: var(--blue-600);
      --roles-primary-container: var(--blue-50);
      --roles-primary-container-gradient: linear-gradient(90deg, #d7e6ff 6.02%, #c7e4ff 51.92%, #dce2ff 96.44%);
      --roles-primary-gradient: linear-gradient(90deg, #3b6bff, #2e96ff 65%, #acb7ff);
      --roles-primary-on-primary: #fff;
      --roles-primary-on-primary-container: var(--blue-900);
      
      /* States */
      --states-links-hovered: rgba(26, 115, 232, 0.04);
      --states-links-focused: rgba(26, 115, 232, 0.06);
      --states-outline-hovered: var(--blue-600);
      --states-outline-hovered-overlay: rgba(23, 78, 166, 0.04);
      --states-outline-focused: var(--blue-600);
      --states-outline-focused-overlay: rgba(23, 78, 166, 0.12);
      --states-primary-hovered: #185abc;
      --states-tonal-hovered: rgba(26, 115, 232, 0.04);
      --states-tonal-focussed: rgba(26, 115, 232, 0.12);
      
      /* Typography */
      --font: 'Google Sans', Arial, Helvetica, sans-serif;
      --font-text: 'Google Sans Text', Arial, Helvetica, sans-serif;
      
      /* Spacing */
      --spacer-xs: 4px;
      --spacer-sm: 8px;
      --spacer-md: 16px;
      --spacer-lg: 24px;
      --spacer-xl: 36px;
      --spacer-2xl: 48px;
      --spacer-3xl: 60px;
      --spacer-4xl: 80px;
      
      /* Shapes */
      --shapes-corner-sm: 8px;
      --shapes-corner-md: 12px;
      --shapes-corner-lg: 16px;
      --shapes-corner-xl: 24px;
      --shapes-corner-xxl: 32px;
      --shapes-corner-xxxl: 84px;
      
      /* Elevation */
      --elevation-1: 0 1px 2px 0 rgba(60, 64, 67, 0.3), 0 1px 3px 1px rgba(60, 64, 67, 0.15);
      --elevation-2: 0 1px 5px 0 rgba(60, 64, 67, 0.2), 0 2px 2px 0 rgba(60, 64, 67, 0.12), 0 1px 3px 0 rgba(60, 64, 67, 0.14);
      --elevation-3: 0 1px 8px 0 rgba(60, 64, 67, 0.2), 0 3px 4px 0 rgba(60, 64, 67, 0.12), 0 2px 4px 0 rgba(60, 64, 67, 0.14);
      --elevation-4: 0 2px 12px 0 rgba(60, 64, 67, 0.2), 0 3px 8px 0 rgba(60, 64, 67, 0.12), 0 5px 6px 0 rgba(60, 64, 67, 0.14);
      --elevation-6: 0 3px 14px 0 rgba(60, 64, 67, 0.2), 0 8px 10px 1px rgba(60, 64, 67, 0.12), 0 5px 6px 0 rgba(60, 64, 67, 0.14);
      
      /* Transitions */
      --transition: 0.2s cubic-bezier(0.4, 0, 0.2, 1);
      --hover-scale: 1.02;
    }
    
    body {
      background: var(--background);
      color: var(--on-surface);
      font-family: var(--font-text);
      font-size: 1rem;
      font-weight: 400;
      line-height: 1.5;
      margin: 0;
      min-height: 100vh;
      letter-spacing: 0.1px;
    }
    
    .app {
      max-width: 1440px;
      margin: 0 auto;
      padding: var(--spacer-md);
    }
    
    header {
      background: var(--surface);
      box-shadow: var(--elevation-2);
      border-radius: var(--shapes-corner-xxl);
      margin: var(--spacer-2xl) 0 var(--spacer-xl) 0;
      padding: var(--spacer-xl) var(--spacer-2xl);
      display: flex;
      align-items: center;
      justify-content: space-between;
      position: relative;
      overflow: hidden;
      transition: var(--transition);
    }
    
    header::before {
      content: '';
      position: absolute;
      top: -50%;
      left: -50%;
      width: 200%;
      height: 200%;
      background: radial-gradient(circle, rgba(26, 115, 232, 0.05) 0%, transparent 70%);
      transform: rotate(30deg);
      pointer-events: none;
    }
    
    header:hover {
      box-shadow: var(--elevation-3);
      transform: translateY(-1px);
    }
    
    .logo {
      font-family: var(--font);
      font-weight: 700;
      font-size: 2.6rem;
      color: var(--roles-primary-on-primary);
      background: var(--roles-primary-primary);
      border-radius: var(--shapes-corner-xl);
      padding: var(--spacer-lg) var(--spacer-2xl);
      box-shadow: var(--elevation-2);
      display: flex;
      align-items: center;
      gap: var(--spacer-md);
      position: relative;
      z-index: 2;
      transition: var(--transition);
    }
    
    .logo:hover {
      transform: scale(var(--hover-scale));
      box-shadow: 0 4px 16px rgba(26, 115, 232, 0.3);
    }
    
    .subtitle {
      color: var(--on-surface-variant);
      font-weight: 400;
      font-size: 1.2rem;
      text-align: right;
      font-family: var(--font-text);
    }
    
    nav {
      display: flex;
      gap: var(--spacer-md);
      margin: 0 0 var(--spacer-xl) 0;
      align-items: center;
      justify-content: center;
      flex-wrap: wrap;
      background: var(--surface);
      padding: var(--spacer-lg);
      border-radius: var(--shapes-corner-xl);
      box-shadow: var(--elevation-1);
    }
    
    nav button {
      font-family: var(--font);
      font-weight: 500;
      padding: var(--spacer-md) var(--spacer-lg);
      border-radius: var(--shapes-corner-lg);
      border: none;
      background: var(--surface-container);
      color: var(--roles-primary-primary);
      cursor: pointer;
      box-shadow: none;
      display: flex;
      align-items: center;
      gap: var(--spacer-xs);
      font-size: 1.05rem;
      transition: var(--transition);
      border: 1px solid var(--outline);
      min-width: 140px;
      justify-content: center;
    }
    
    nav button:hover {
      background: var(--blue-50);
      color: var(--blue-800);
      transform: scale(var(--hover-scale));
      box-shadow: 0 2px 8px rgba(26, 115, 232, 0.15);
      border-color: var(--blue-300);
    }
    
    nav button:active {
      transform: scale(0.98);
    }
    
    .material-symbols-outlined {
      font-size: 1.4rem;
      vertical-align: middle;
    }
    
    .glass-home {
      background: var(--surface);
      box-shadow: var(--elevation-2);
      border-radius: var(--shapes-corner-xl);
      padding: var(--spacer-2xl);
      margin-bottom: var(--spacer-2xl);
      transition: var(--transition);
    }
    
    .glass-home:hover {
      box-shadow: var(--elevation-3);
      transform: translateY(-2px);
    }
    
    .home-gallery {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: var(--spacer-lg);
      margin-top: var(--spacer-xl);
    }
    
    .img-block {
      background: var(--surface-container);
      border-radius: var(--shapes-corner-lg);
      box-shadow: var(--elevation-1);
      padding: var(--spacer-lg);
      display: flex;
      flex-direction: column;
      align-items: center;
      transition: var(--transition);
      border: 1px solid var(--outline);
      position: relative;
      overflow: hidden;
    }
    
    .img-block:hover {
      transform: translateY(-4px);
      box-shadow: var(--elevation-2);
      border-color: var(--blue-300);
    }
    
    .img-block::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 4px;
      background: var(--roles-primary-primary);
      opacity: 0;
      transition: var(--transition);
    }
    
    .img-block:hover::before {
      opacity: 1;
    }
    
    .img-block img {
      max-width: 100%;
      border-radius: var(--shapes-corner-md);
      box-shadow: 0 1px 6px rgba(0,0,0,0.1);
      transition: var(--transition);
      border: 1px solid var(--outline);
    }
    
    .img-block:hover img {
      transform: scale(1.05);
      box-shadow: 0 4px 16px rgba(0,0,0,0.15);
    }
    
    .img-caption {
      margin-top: var(--spacer-md);
      font-size: 1.05rem;
      color: var(--on-surface-variant);
      text-align: center;
      font-weight: 500;
    }
    
    .level-badge {
      position: absolute;
      top: var(--spacer-md);
      right: var(--spacer-md);
      width: 26px;
      height: 26px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 0.75rem;
      font-weight: bold;
      color: white;
    }
    
    .fatal .level-badge { background: var(--red-600); }
    .moderate .level-badge { background: var(--yellow-700); }
    .leve .level-badge { background: var(--green-600); }
    
    .modal-backdrop {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      background: rgba(0, 0, 0, 0.3);
      z-index: 100;
      backdrop-filter: blur(4px);
      transition: opacity 0.3s;
    }
    
    .modal-backdrop.active {
      display: block;
      opacity: 1;
    }
    
    .panel {
      display: none;
      flex-direction: column;
      background: var(--surface);
      box-shadow: var(--elevation-4);
      border-radius: var(--shapes-corner-xl);
      padding: var(--spacer-2xl);
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%) scale(0.95);
      z-index: 101;
      min-width: 420px;
      max-width: 95vw;
      max-height: 90vh;
      overflow-y: auto;
      border: 1px solid var(--outline);
      transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
    }
    
    .panel.active {
      display: flex;
      transform: translate(-50%, -50%) scale(1);
    }
    
    .panel h2 {
      display: flex;
      align-items: center;
      gap: var(--spacer-md);
      margin: 0 0 var(--spacer-xl) 0;
      color: var(--roles-primary-primary);
      font-family: var(--font);
      font-weight: 700;
      font-size: 1.8rem;
    }
    
    .panel h3 {
      margin: var(--spacer-xl) 0 var(--spacer-lg) 0;
      color: var(--roles-primary-primary);
      font-family: var(--font);
      font-weight: 600;
      font-size: 1.4rem;
    }
    
    .panel-nav {
      display: flex;
      gap: var(--spacer-sm);
      margin-bottom: var(--spacer-xl);
      flex-wrap: wrap;
      border-bottom: 1px solid var(--outline);
      padding-bottom: var(--spacer-md);
    }
    
    .panel-nav button {
      padding: var(--spacer-sm) var(--spacer-md);
      background: var(--surface-container);
      color: var(--on-surface-variant);
      border: 1px solid var(--outline);
      font-size: 0.95rem;
      border-radius: var(--shapes-corner-md);
      font-weight: 500;
      transition: var(--transition);
      min-width: 100px;
    }
    
    .panel-nav button:hover {
      background: var(--blue-50);
      border-color: var(--blue-300);
    }
    
    .panel-nav button.active {
      background: var(--roles-primary-primary);
      color: var(--roles-primary-on-primary);
      border-color: var(--roles-primary-primary);
      font-weight: 600;
    }
    
    .close-btn {
      position: absolute;
      top: var(--spacer-lg);
      right: var(--spacer-lg);
      background: var(--surface-container);
      border: 1px solid var(--outline);
      width: 40px;
      height: 40px;
      border-radius: 50%;
      cursor: pointer;
      font-size: 1.6rem;
      display: flex;
      align-items: center;
      justify-content: center;
      color: var(--on-surface);
      transition: var(--transition);
      box-shadow: var(--elevation-1);
    }
    
    .close-btn:hover {
      background: var(--red-50);
      color: var(--red-600);
      border-color: var(--red-300);
      transform: rotate(90deg);
      box-shadow: 0 2px 8px rgba(234, 67, 53, 0.2);
    }
    
    .panel-gallery {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
      gap: var(--spacer-md);
      margin-top: var(--spacer-lg);
    }
    
    .panel-img-block {
      background: var(--surface-container);
      border-radius: var(--shapes-corner-md);
      padding: var(--spacer-md);
      box-shadow: var(--elevation-1);
      text-align: center;
      transition: var(--transition);
      border: 1px solid var(--outline);
    }
    
    .panel-img-block:hover {
      transform: translateY(-2px);
      box-shadow: var(--elevation-2);
      border-color: var(--blue-300);
    }
    
    .panel-img-block img {
      max-width: 100%;
      border-radius: var(--shapes-corner-sm);
      box-shadow: 0 1px 4px rgba(0,0,0,0.1);
      transition: var(--transition);
    }
    
    .panel-img-block:hover img {
      transform: scale(1.04);
      box-shadow: 0 2px 8px rgba(0,0,0,0.15);
    }
    
    .panel-img-caption {
      margin-top: var(--spacer-xs);
      font-size: 0.95rem;
      color: var(--on-surface-variant);
    }
    
    .panel-warn {
      margin: var(--spacer-lg) 0;
      font-weight: 500;
      padding: var(--spacer-md) var(--spacer-lg);
      border-radius: var(--shapes-corner-md);
      display: flex;
      align-items: center;
      gap: var(--spacer-sm);
      background: var(--yellow-50);
      border-left: 4px solid var(--yellow-600);
      border: 1px solid var(--yellow-300);
    }
    
    .panel-warn.fatal {
      background: var(--red-50);
      border-left-color: var(--red-600);
      border-color: var(--red-300);
    }
    
    .panel-warn.leve {
      background: var(--green-50);
      border-left-color: var(--green-600);
      border-color: var(--green-300);
    }
    
    .comb-result .fatal {
      background: var(--red-50);
      border-left: 4px solid var(--red-600);
      border: 1px solid var(--red-300);
    }
    
    .comb-result .moderate {
      background: var(--yellow-50);
      border-left: 4px solid var(--yellow-600);
      border: 1px solid var(--yellow-300);
    }
    
    .comb-result .leve {
      background: var(--green-50);
      border-left: 4px solid var(--green-600);
      border: 1px solid var(--green-300);
    }
    
    .comb-result div {
      margin-bottom: var(--spacer-sm);
      padding: var(--spacer-sm) var(--spacer-md);
      border-radius: var(--shapes-corner-sm);
    }
    
    .notif-area {
      margin: var(--spacer-lg) 0 0 0;
      display: flex;
      gap: var(--spacer-md);
      flex-wrap: wrap;
    }
    
    .notif {
      border-radius: var(--shapes-corner-lg);
      background: var(--surface);
      box-shadow: var(--elevation-1);
      padding: var(--spacer-md) var(--spacer-lg);
      display: flex;
      align-items: center;
      gap: var(--spacer-sm);
      font-size: 1.05rem;
      flex: 1;
      min-width: 300px;
      border: 1px solid var(--outline);
      transition: var(--transition);
    }
    
    .notif:hover {
      transform: translateY(-2px);
      box-shadow: var(--elevation-2);
      border-color: var(--blue-300);
    }
    
    .notif.fatal {
      border-color: var(--red-300);
      background: var(--red-50);
    }
    
    .notif.moderate {
      border-color: var(--yellow-300);
      background: var(--yellow-50);
    }
    
    .notif.leve {
      border-color: var(--green-300);
      background: var(--green-50);
    }
    
    .youtube-thumb {
      border-radius: var(--shapes-corner-md);
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
      width: 100%;
      height: auto;
      transition: var(--transition);
    }
    
    .youtube-thumb:hover {
      transform: scale(1.02);
      box-shadow: 0 4px 16px rgba(0,0,0,0.15);
    }
    
    .edu-link-card {
      background: var(--surface-container);
      border-radius: var(--shapes-corner-md);
      padding: var(--spacer-md);
      margin-bottom: var(--spacer-sm);
      box-shadow: var(--elevation-1);
      transition: var(--transition);
      border: 1px solid var(--outline);
    }
    
    .edu-link-card:hover {
      transform: translateY(-1px);
      box-shadow: var(--elevation-2);
      border-color: var(--blue-300);
    }
    
    details {
      margin-top: var(--spacer-xl);
      border: 1px solid var(--outline);
      border-radius: var(--shapes-corner-lg);
      overflow: hidden;
    }
    
    details[open] {
      box-shadow: var(--elevation-1);
    }
    
    summary {
      padding: var(--spacer-md) var(--spacer-lg);
      font-family: var(--font);
      font-weight: 500;
      background: var(--surface-container);
      cursor: pointer;
      user-select: none;
      transition: var(--transition);
      display: flex;
      align-items: center;
      gap: var(--spacer-sm);
    }
    
    summary:hover {
      background: var(--blue-50);
    }
    
    summary::marker {
      color: var(--roles-primary-primary);
      font-size: 1.2em;
    }
    
    summary .material-symbols-outlined {
      font-variation-settings: 'FILL' 1, 'wght' 600;
      transition: transform 0.3s;
    }
    
    details[open] summary .material-symbols-outlined {
      transform: rotate(90deg);
    }
    
    input, select {
      padding: var(--spacer-md);
      border-radius: var(--shapes-corner-lg);
      border: 1px solid var(--outline);
      background: var(--surface);
      font-family: var(--font-text);
      font-size: 1rem;
      margin-bottom: var(--spacer-md);
      width: 100%;
      transition: var(--transition);
      box-shadow: none;
    }
    
    input:focus, select:focus {
      outline: none;
      border-color: var(--roles-primary-primary);
      box-shadow: 0 0 0 2px rgba(26, 115, 232, 0.2);
    }
    
    button#checkComb {
      background: var(--roles-primary-primary);
      color: var(--roles-primary-on-primary);
      border: none;
      padding: var(--spacer-md) var(--spacer-xl);
      border-radius: var(--shapes-corner-lg);
      font-family: var(--font);
      font-weight: 500;
      font-size: 1.05rem;
      cursor: pointer;
      display: flex;
      align-items: center;
      gap: var(--spacer-sm);
      transition: var(--transition);
      box-shadow: var(--elevation-1);
      width: fit-content;
    }
    
    button#checkComb:hover {
      background: var(--blue-700);
      transform: translateY(-1px);
      box-shadow: var(--elevation-2);
    }
    
    button#checkComb:active {
      transform: translateY(0);
    }
    
    .search-box {
      margin-bottom: var(--spacer-xl);
    }
    
    .search-box input {
      padding-left: 48px;
      background-position: 16px center;
      background-repeat: no-repeat;
      background-image: url("image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='20' height='20' viewBox='0 0 24 24' fill='none' stroke='%235f6368' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Ccircle cx='11' cy='11' r='8'/%3E%3Cline x1='21' y1='21' x2='16.65' y2='16.65'/%3E%3C/svg%3E");
    }
    
    .wiki-summary {
      background: var(--surface-container);
      padding: var(--spacer-lg);
      border-radius: var(--shapes-corner-lg);
      margin-top: var(--spacer-xl);
      border: 1px solid var(--outline);
      line-height: 1.6;
      font-size: 1.05rem;
    }
    
    .wiki-summary a {
      color: var(--roles-primary-primary);
      font-weight: 500;
      text-decoration: none;
      transition: var(--transition);
    }
    
    .wiki-summary a:hover {
      color: var(--blue-800);
      text-decoration: underline;
    }
    
    @media (max-width: 768px) {
      .app {
        padding: var(--spacer-sm);
      }
      
      header {
        flex-direction: column;
        padding: var(--spacer-lg) var(--spacer-md);
        gap: var(--spacer-md);
      }
      
      .logo {
        font-size: 2.2rem;
        padding: var(--spacer-md) var(--spacer-lg);
        justify-content: center;
      }
      
      .subtitle {
        text-align: center;
        font-size: 1.1rem;
      }
      
      nav {
        padding: var(--spacer-md);
        gap: var(--spacer-sm);
      }
      
      nav button {
        padding: var(--spacer-sm) var(--spacer-md);
        font-size: 0.95rem;
        min-width: auto;
      }
      
      .glass-home {
        padding: var(--spacer-xl) var(--spacer-lg);
      }
      
      .panel {
        min-width: 95vw;
        padding: var(--spacer-xl) var(--spacer-lg) var(--spacer-lg) var(--spacer-lg);
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%) scale(0.95);
      }
      
      .close-btn {
        top: var(--spacer-md);
        right: var(--spacer-md);
        width: 36px;
        height: 36px;
        font-size: 1.4rem;
      }
    }
    
    @media (max-width: 480px) {
      nav {
        flex-direction: column;
      }
      
      nav button {
        width: 100%;
        justify-content: center;
      }
      
      .home-gallery, .panel-gallery {
        grid-template-columns: 1fr;
      }
      
      .notif-area {
        flex-direction: column;
      }
      
      .notif {
        min-width: auto;
      }
    }
    
    /* Animation for panel entrance */
    @keyframes fadeIn {
      from { opacity: 0; transform: translate(-50%, -50%) scale(0.95); }
      to { opacity: 1; transform: translate(-50%, -50%) scale(1); }
    }
    
    .panel.active {
      animation: fadeIn 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
    }
  </style>
</head>
<body>
<div class="app">
  <header>
    <span class="logo">
      <span class="material-symbols-outlined">health_and_safety</span>
      SaludPro
    </span>
    <span class="subtitle">Plataforma Clínica Avanzada</span>
  </header>
  <nav>
    <button id="btn-procedimientos">
      <span class="material-symbols-outlined">edit_note</span>
      Procedimientos
    </button>
    <button id="btn-enfermedades">
      <span class="material-symbols-outlined">vaccines</span>
      Enfermedades
    </button>
    <button id="btn-interacciones">
      <span class="material-symbols-outlined">warning</span>
      Interacciones
    </button>
    <button id="btn-combinador">
      <span class="material-symbols-outlined">science</span>
      Combinador
    </button>
    <button id="btn-galeria">
      <span class="material-symbols-outlined">photo_library</span>
      Galería
    </button>
    <button id="btn-educacion">
      <span class="material-symbols-outlined">menu_book</span>
      Educación
    </button>
  </nav>
  <div class="glass-home">
    <h2 style="margin-top:0; color: var(--roles-primary-primary); font-family: var(--font); font-weight: 700;">Bienvenido a SaludPro</h2>
    <div class="notif-area">
      <div class="notif fatal">
        <span class="material-symbols-outlined">block</span>
        Nunca omitas el lavado de manos antes de tocar a un paciente.
      </div>
      <div class="notif moderate">
        <span class="material-symbols-outlined">warning</span>
        Verifica siempre la dosis y alergias antes de administrar fármacos.
      </div>
      <div class="notif leve">
        <span class="material-symbols-outlined">check_circle</span>
        Educa al paciente en el uso correcto de inhaladores y dispositivos.
      </div>
    </div>
    <div class="home-gallery">
      <div class="img-block fatal">
        <div class="level-badge">F</div>
        <img src="https://placehold.co/300x200/ff6b6b/ffffff?text=Lavado+de+manos" alt="No lavado de manos">
        <div class="img-caption">Nunca omitas el lavado de manos: ¡Riesgo grave de infecciones fatales!</div>
      </div>
      <div class="img-block leve">
        <div class="level-badge">L</div>
        <img src="https://placehold.co/300x200/4ecdc4/ffffff?text=Lavado+correcto" alt="Lavado correcto de manos">
        <div class="img-caption">Lavado de manos correcto: siempre antes y después de cualquier procedimiento.</div>
      </div>
      <div class="img-block leve">
        <div class="level-badge">L</div>
        <img src="https://placehold.co/300x200/45b7d1/ffffff?text=RCP" alt="RCP correcta">
        <div class="img-caption">RCP correctamente aplicada: salva vidas.</div>
      </div>
      <div class="img-block moderate">
        <div class="level-badge">M</div>
        <img src="https://placehold.co/300x200/f9ca24/ffffff?text=Diabetes" alt="Manejo incorrecto de diabetes">
        <div class="img-caption">Error frecuente: no verificar glucosa antes de aplicar insulina.</div>
      </div>
      <div class="img-block leve">
        <div class="level-badge">L</div>
        <img src="https://placehold.co/300x200/6c5ce7/ffffff?text=Inhalador" alt="Uso correcto de inhalador">
        <div class="img-caption">Uso correcto de inhalador: educación previene crisis.</div>
      </div>
      <div class="img-block fatal">
        <div class="level-badge">F</div>
        <img src="https://placehold.co/300x200/e84393/ffffff?text=ECG" alt="ECG">
        <div class="img-caption">Nunca ignores alteraciones graves en ECG: puede ser fatal.</div>
      </div>
    </div>
  </div>
  <div class="modal-backdrop" id="modalBackdrop"></div>
  
  <!-- Procedimientos -->
  <section class="panel" id="panel-procedimientos">
    <button class="close-btn" title="Cerrar">&times;</button>
    <h2><span class="material-symbols-outlined">edit_note</span> Procedimientos Clínicos</h2>
    <div class="panel-nav">
      <button data-sub="higiene" class="active">Higiene</button>
      <button data-sub="farmaco">Farmacología</button>
      <button data-sub="curaciones">Curaciones</button>
      <button data-sub="emergencias">Emergencias</button>
    </div>
    <div id="procedimientos-content"></div>
    <div class="panel-warn moderate">
      <span class="material-symbols-outlined">warning</span>
      Saltar pasos de higiene puede provocar complicaciones graves y responsabilidad profesional.
    </div>
    <h3>Galería de procedimientos</h3>
    <div class="panel-gallery" id="procedimientos-gallery"></div>
  </section>
  
  <!-- Enfermedades -->
  <section class="panel" id="panel-enfermedades">
    <button class="close-btn" title="Cerrar">&times;</button>
    <h2><span class="material-symbols-outlined">vaccines</span> Enfermedades y Patologías</h2>
    <div class="panel-nav">
      <button data-sub="cronicas" class="active">Crónicas</button>
      <button data-sub="infecciosas">Infecciosas</button>
      <button data-sub="respiratorias">Respiratorias</button>
    </div>
    <div id="enfermedades-content"></div>
    <h3>Galería de patologías</h3>
    <div class="panel-gallery" id="enfermedades-gallery"></div>
  </section>
  
  <!-- Interacciones -->
  <section class="panel" id="panel-interacciones">
    <button class="close-btn" title="Cerrar">&times;</button>
    <h2><span class="material-symbols-outlined">warning</span> Interacciones Medicamentosas</h2>
    <div class="panel-nav">
      <button data-sub="cardio" class="active">Cardiología</button>
      <button data-sub="infecciosas">Infecciosas</button>
      <button data-sub="geriatria">Geriatría</button>
    </div>
    <div id="interacciones-content"></div>
    <h3>Ejemplos visuales de interacciones</h3>
    <div class="panel-gallery" id="interacciones-gallery"></div>
  </section>
  
  <!-- Combinador -->
  <section class="panel" id="panel-combinador">
    <button class="close-btn" title="Cerrar">&times;</button>
    <h2><span class="material-symbols-outlined">science</span> Combinador de Medicamentos</h2>
    <select id="combCategoria">
      <option value="todos">Todas las categorías</option>
      <option value="cardio">Cardiología</option>
      <option value="infecciosas">Infecciosas</option>
      <option value="geriatria">Geriatría</option>
    </select>
    <input id="medA" placeholder="Medicamento A (ej: Warfarina)">
    <input id="medB" placeholder="Medicamento B (ej: Ibuprofeno)">
    <button id="checkComb">
      <span class="material-symbols-outlined">search</span>
      Verificar Interacción
    </button>
    <div id="comb-result" class="comb-result" style="margin-top:var(--spacer-lg);"></div>
    <details>
      <summary>
        <span class="material-symbols-outlined">arrow_right</span>
        Lista completa de interacciones críticas
      </summary>
      <div id="all-inter-list" style="margin-top:var(--spacer-sm);"></div>
    </details>
  </section>
  
  <!-- Galería -->
  <section class="panel" id="panel-galeria">
    <button class="close-btn" title="Cerrar">&times;</button>
    <h2><span class="material-symbols-outlined">photo_library</span> Galería Educativa Clínica</h2>
    <div class="panel-gallery" id="galleryGrid"></div>
    <div class="panel-warn fatal">
      <span class="material-symbols-outlined">block</span>
      Nunca realices prácticas inseguras sin supervisión, pueden ser fatales para el paciente.
    </div>
  </section>
  
  <!-- Educación -->
  <section class="panel" id="panel-educacion">
    <button class="close-btn" title="Cerrar">&times;</button>
    <h2><span class="material-symbols-outlined">menu_book</span> Recursos Educativos</h2>
    <div class="search-box">
      <input id="eduSearchBox" placeholder="Buscar recurso, tip, video, protocolo...">
    </div>
    <div id="educacion-content"></div>
    <h3>Recursos destacados</h3>
    <div class="panel-gallery" id="educacion-gallery"></div>
    
    <div>
      <h3>Videos educativos</h3>
      <div class="edu-link-card">
        <img class="youtube-thumb" src="https://placehold.co/400x225/ff0000/ffffff?text=Video+RCP" alt="RCP básica">
        <b>RCP básica (YouTube):</b> 
        <a href="https://www.youtube.com/watch?v=9kZCk5c1tC4" target="_blank">Ver video</a>
      </div>
      <div class="edu-link-card">
        <img class="youtube-thumb" src="https://placehold.co/400x225/000000/ffffff?text=Video+Manos" alt="Lavado de manos OMS">
        <b>Lavado de manos OMS:</b> 
        <a href="https://www.youtube.com/watch?v=Gf3rT0P_TyA" target="_blank">Ver video</a>
      </div>
      <div class="edu-link-card">
        <img class="youtube-thumb" src="https://placehold.co/400x225/0066cc/ffffff?text=Video+Diabetes" alt="Diabetes MedlinePlus">
        <b>Diabetes (MedlinePlus):</b> 
        <a href="https://www.youtube.com/watch?v=0YZpR9R7xqs" target="_blank">Ver video</a>
      </div>
    </div>
    
    <div style="margin-top:var(--spacer-xl);">
      <h3>Fuentes externas confiables</h3>
      <div style="display: flex; gap: var(--spacer-md); flex-wrap: wrap; margin-top: var(--spacer-sm);">
        <a href="https://es.wikipedia.org/wiki/Salud" target="_blank" style="background: var(--surface-container); padding: var(--spacer-sm) var(--spacer-md); border-radius: var(--shapes-corner-md); text-decoration: none; color: var(--roles-primary-primary); font-weight: 500; transition: var(--transition);">Wikipedia Salud</a>
        <a href="https://medlineplus.gov/spanish/" target="_blank" style="background: var(--surface-container); padding: var(--spacer-sm) var(--spacer-md); border-radius: var(--shapes-corner-md); text-decoration: none; color: var(--roles-primary-primary); font-weight: 500; transition: var(--transition);">MedlinePlus</a>
        <a href="https://www.msdmanuals.com/es/professional" target="_blank" style="background: var(--surface-container); padding: var(--spacer-sm) var(--spacer-md); border-radius: var(--shapes-corner-md); text-decoration: none; color: var(--roles-primary-primary); font-weight: 500; transition: var(--transition);">MSD Manuals</a>
      </div>
    </div>
    
    <div id="wikiSummary" class="wiki-summary"></div>
  </section>
</div>

<script>
// --- DATA ampliada con imágenes y advertencias ---
const procedimientos = {
  higiene: [
    {
      titulo: 'Lavado de manos',
      desc: 'Prevención de infecciones. Usa agua y jabón o gel antiséptico, frota durante al menos 20 segundos, y seca completamente. Es esencial antes y después de cada contacto con pacientes.',
      nivel: 'leve',
      img: 'https://placehold.co/300x200/4ecdc4/ffffff?text=Lavado+de+manos'
    },
    {
      titulo: 'No lavado de manos',
      desc: 'Omitir el lavado de manos es una de las principales causas de infecciones nosocomiales. Puede provocar sepsis, infecciones postoperatorias y propagación de patógenos multirresistentes.',
      nivel: 'fatal',
      img: 'https://placehold.co/300x200/ff6b6b/ffffff?text=No+Lavar+Manos'
    },
    {
      titulo: 'Desinfección de superficies',
      desc: 'Limpieza adecuada de equipos y superficies con soluciones desinfectantes. Especial atención a estetoscopios, fonendoscopios y dispositivos médicos.',
      nivel: 'leve',
      img: 'https://placehold.co/300x200/a55eea/ffffff?text=Desinfección'
    }
  ],
  farmaco: [
    {
      titulo: 'Administración oral segura',
      desc: 'Verificar los 5 correctos: paciente correcto, medicamento correcto, dosis correcta, vía correcta y hora correcta. Documentar inmediatamente después de la administración.',
      nivel: 'leve',
      img: 'https://placehold.co/300x200/00b894/ffffff?text=Medicamentos'
    },
    {
      titulo: 'Dosis incorrecta',
      desc: 'Una dosis excesiva o insuficiente puede ser fatal, especialmente con medicamentos de estrecho margen terapéutico como digoxina, insulina o anticoagulantes.',
      nivel: 'fatal',
      img: 'https://placehold.co/300x200/d63031/ffffff?text=Dosis+Incorrecta'
    },
    {
      titulo: 'Verificación de alergias',
      desc: 'Siempre confirmar antecedentes alérgicos antes de prescribir o administrar cualquier medicamento. Las reacciones anafilácticas pueden ser mortales.',
      nivel: 'moderate',
      img: 'https://placehold.co/300x200/f39c12/ffffff?text=Alergias'
    }
  ],
  curaciones: [
    {
      titulo: 'Curación de herida limpia',
      desc: 'Cambio de apósito en heridas limpias. Técnica aséptica, evaluación del lecho de la herida, control de signos de infección y documentación detallada.',
      nivel: 'leve',
      img: 'https://placehold.co/300x200/3498db/ffffff?text=Curación'
    },
    {
      titulo: 'No usar guantes',
      desc: 'Realizar curaciones sin guantes no solo viola protocolos de seguridad, sino que expone tanto al profesional como al paciente a riesgos infecciosos significativos.',
      nivel: 'moderate',
      img: 'https://placehold.co/300x200/e67e22/ffffff?text=Sin+Guantes'
    },
    {
      titulo: 'Técnica aséptica',
      desc: 'Mantenimiento de campo estéril durante procedimientos invasivos. Uso adecuado de campos estériles, pinzas y técnicas para evitar contaminación cruzada.',
      nivel: 'leve',
      img: 'https://placehold.co/300x200/8e44ad/ffffff?text=Aséptico'
    }
  ],
  emergencias: [
    {
      titulo: 'RCP básica',
      desc: 'Compresiones torácicas correctamente aplicadas salvan vidas. Frecuencia de 100-120 por minuto, profundidad de 5-6 cm, permitir expansión torácica completa.',
      nivel: 'leve',
      img: 'https://placehold.co/300x200/1abc9c/ffffff?text=RCP+Básica'
    },
    {
      titulo: 'RCP incorrecta',
      desc: 'Compresiones demasiado superficiales, demasiado rápidas o con interrupciones frecuentes reducen significativamente las posibilidades de supervivencia.',
      nivel: 'fatal',
      img: 'https://placehold.co/300x200/c0392b/ffffff?text=RCP+Incorrecta'
    },
    {
      titulo: 'Manejo de vía aérea',
      desc: 'Técnicas adecuadas para mantener la permeabilidad de la vía aérea en emergencias. Posición, uso de dispositivos y reconocimiento temprano de obstrucción.',
      nivel: 'moderate',
      img: 'https://placehold.co/300x200/27ae60/ffffff?text=Vía+Aérea'
    }
  ]
};

const enfermedades = {
  cronicas: [
    {
      titulo: 'Diabetes no controlada',
      desc: 'No verificar la glucosa antes de administrar insulina puede provocar hipoglucemia severa, coma y muerte. El monitoreo regular es esencial.',
      nivel: 'fatal',
      img: 'https://placehold.co/300x200/e74c3c/ffffff?text=Diabetes+No+Controlada'
    },
    {
      titulo: 'Diabetes controlada',
      desc: 'Control estricto de glucemia previene complicaciones a largo plazo como nefropatía, retinopatía y neuropatía periférica.',
      nivel: 'leve',
      img: 'https://placehold.co/300x200/2ecc71/ffffff?text=Diabetes+Controlada'
    },
    {
      titulo: 'Hipertensión arterial',
      desc: 'La hipertensión no diagnosticada o mal controlada es un factor de riesgo principal para accidente cerebrovascular, infarto de miocardio e insuficiencia cardíaca.',
      nivel: 'moderate',
      img: 'https://placehold.co/300x200/f39c12/ffffff?text=Hipertensión'
    }
  ],
  infecciosas: [
    {
      titulo: 'Tuberculosis no diagnosticada',
      desc: 'Ignorar síntomas como tos persistente, pérdida de peso y fiebre vespertina puede permitir la propagación de la enfermedad y complicaciones graves como meningitis tuberculosa.',
      nivel: 'fatal',
      img: 'https://placehold.co/300x200/d35400/ffffff?text=Tuberculosis'
    },
    {
      titulo: 'COVID-19: uso correcto de EPP',
      desc: 'El uso adecuado de equipo de protección personal previene la transmisión de enfermedades infecciosas altamente contagiosas entre pacientes y personal sanitario.',
      nivel: 'leve',
      img: 'https://placehold.co/300x200/3498db/ffffff?text=EPP+COVID'
    },
    {
      titulo: 'Sepsis temprana',
      desc: 'Reconocimiento precoz de los signos de sepsis (fiebre, taquicardia, taquipnea, leucocitosis) es crucial para iniciar tratamiento antibiótico inmediato y salvar vidas.',
      nivel: 'fatal',
      img: 'https://placehold.co/300x200/c0392b/ffffff?text=Sepsis'
    }
  ],
  respiratorias: [
    {
      titulo: 'Crisis asmática sin inhalador',
      desc: 'No educar a los pacientes sobre el uso correcto de inhaladores y no proporcionar un plan de acción puede resultar en crisis asmáticas fatales.',
      nivel: 'fatal',
      img: 'https://placehold.co/300x200/e67e22/ffffff?text=Crisis+Asmática'
    },
    {
      titulo: 'Fisioterapia respiratoria',
      desc: 'Técnicas de fisioterapia respiratoria previenen complicaciones como atelectasias y neumonía, especialmente en pacientes postoperatorios o con enfermedad pulmonar crónica.',
      nivel: 'leve',
      img: 'https://placehold.co/300x200/8e44ad/ffffff?text=Fisioterapia'
    },
    {
      titulo: 'Neumonía adquirida en hospital',
      desc: 'La neumonía asociada a ventilación mecánica es una de las infecciones más comunes y mortales en unidades de cuidados intensivos.',
      nivel: 'moderate',
      img: 'https://placehold.co/300x200/27ae60/ffffff?text=Neumonía'
    }
  ]
};

const interaccionesCat = {
  cardio: [
    {
      comb: 'Warfarina + AINEs (Ibuprofeno, Naproxeno)',
      nivel: 'fatal',
      desc: 'Aumento significativo del riesgo de hemorragia gastrointestinal y hemorragia intracraneal. Los AINEs desplazan la warfarina de las proteínas plasmáticas y afectan la función plaquetaria.',
      img: 'https://placehold.co/300x200/e74c3c/ffffff?text=Warfarina+AINEs'
    },
    {
      comb: 'IECA (Enalapril) + Espironolactona',
      nivel: 'moderate',
      desc: 'Riesgo de hiperkalemia, especialmente en pacientes con disfunción renal. Requiere monitoreo frecuente de electrolitos séricos.',
      img: 'https://placehold.co/300x200/f39c12/ffffff?text=IECA+Espironolactona'
    },
    {
      comb: 'Digoxina + Verapamilo',
      nivel: 'moderate',
      desc: 'El verapamilo aumenta los niveles séricos de digoxina, incrementando el riesgo de toxicidad digitálica (náuseas, arritmias, visión amarilla).',
      img: 'https://placehold.co/300x200/e67e22/ffffff?text=Digoxina+Verapamilo'
    }
  ],
  infecciosas: [
    {
      comb: 'Ritonavir + Estatinas (Atorvastatina, Simvastatina)',
      nivel: 'fatal',
      desc: 'Rabdomiólisis grave y potencialmente fatal. El ritonavir inhibe el metabolismo de las estatinas, aumentando drásticamente sus niveles séricos.',
      img: 'https://placehold.co/300x200/c0392b/ffffff?text=Ritonavir+Estatinas'
    },
    {
      comb: 'Amoxicilina + Anticoagulantes orales',
      nivel: 'moderate',
      desc: 'Algunos antibióticos pueden potenciar el efecto de los anticoagulantes, aumentando el riesgo de sangrado. Requiere monitoreo del INR.',
      img: 'https://placehold.co/300x200/d35400/ffffff?text=Amoxicilina+Anticoagulantes'
    },
    {
      comb: 'Metronidazol + Alcohol',
      nivel: 'moderate',
      desc: 'Reacción tipo antabuse: náuseas, vómitos, palpitaciones, hipotensión. El metronidazol inhibe el metabolismo del alcohol.',
      img: 'https://placehold.co/300x200/27ae60/ffffff?text=Metronidazol+Alcohol'
    }
  ],
  geriatria: [
    {
      comb: 'Benzodiacepinas (Diazepam) + Opioides (Morfina)',
      nivel: 'fatal',
      desc: 'Depresión respiratoria severa y potencialmente fatal. Ambos fármacos son depresores del sistema nervioso central con efecto sinérgico.',
      img: 'https://placehold.co/300x200/c0392b/ffffff?text=Benzodiacepinas+Opioides'
    },
    {
      comb: 'Diuréticos (Furosemida) + IECA (Lisinopril)',
      nivel: 'moderate',
      desc: 'Hipotensión ortostática significativa, especialmente en ancianos. Riesgo aumentado de caídas y fracturas.',
      img: 'https://placehold.co/300x200/f39c12/ffffff?text=Diuréticos+IECA'
    },
    {
      comb: 'Antipsicóticos + Anticolinérgicos',
      nivel: 'moderate',
      desc: 'Aumento del riesgo de estreñimiento severo, retención urinaria y confusión en pacientes ancianos, especialmente con demencia.',
      img: 'https://placehold.co/300x200/e67e22/ffffff?text=Antipsicóticos+Anticolinérgicos'
    }
  ]
};

const galleryImgs = [
  {src: "https://placehold.co/300x200/4ecdc4/ffffff?text=Lavado+de+manos", caption: "Poster lavado de manos", nivel: 'leve'},
  {src: "https://placehold.co/300x200/ff6b6b/ffffff?text=No+Lavar+Manos", caption: "Nunca omitas el lavado de manos", nivel: 'fatal'},
  {src: "https://placehold.co/300x200/45b7d1/ffffff?text=RCP", caption: "RCP correctamente aplicada", nivel: 'leve'},
  {src: "https://placehold.co/300x200/f9ca24/ffffff?text=Diabetes", caption: "Error: no verificar glucosa en diabetes", nivel: 'moderate'},
  {src: "https://placehold.co/300x200/6c5ce7/ffffff?text=Inhalador", caption: "Uso correcto de inhalador", nivel: 'leve'},
  {src: "https://placehold.co/300x200/e84393/ffffff?text=ECG", caption: "No ignores alteraciones graves en ECG", nivel: 'fatal'},
  {src: "https://placehold.co/300x200/a55eea/ffffff?text=Protección", caption: "Protección personal en emergencias", nivel: 'moderate'},
  {src: "https://placehold.co/300x200/3498db/ffffff?text=Hipertensión", caption: "Control de hipertensión", nivel: 'leve'}
];

const educacionImgs = [
  {src: "https://placehold.co/300x200/9b59b6/ffffff?text=ECG", caption: "Interpretación básica de ECG"},
  {src: "https://placehold.co/300x200/3498db/ffffff?text=EPP", caption: "Uso correcto de EPP"},
  {src: "https://placehold.co/300x200/6c5ce7/ffffff?text=Inhaladores", caption: "Educación en inhaladores"},
  {src: "https://placehold.co/300x200/4ecdc4/ffffff?text=Lavado+Manos", caption: "Lavado de manos OMS"},
  {src: "https://placehold.co/300x200/8e44ad/ffffff?text=Técnica+Aséptica", caption: "Técnica aséptica en curaciones"},
  {src: "https://placehold.co/300x200/27ae60/ffffff?text=Vía+Aérea", caption: "Manejo de vía aérea"}
];

// Paneles: Navegación modal
function showPanel(name) {
  document.querySelectorAll('.panel').forEach(p => p.classList.remove('active'));
  document.getElementById('modalBackdrop').classList.add('active');
  document.getElementById('panel-' + name).classList.add('active');
  
  // Cargar contenido según el panel
  if (name === 'procedimientos') { 
    renderProcedimientos('higiene'); 
    renderProcedimientosGallery('higiene'); 
  }
  if (name === 'enfermedades') { 
    renderEnfermedades('cronicas'); 
    renderEnfermedadesGallery('cronicas'); 
  }
  if (name === 'interacciones') { 
    renderInteracciones('cardio'); 
    renderInteraccionesGallery('cardio'); 
  }
  if (name === 'combinador') {
    document.getElementById('comb-result').innerHTML = '';
    document.getElementById('medA').value = '';
    document.getElementById('medB').value = '';
    renderAllInterList();
  }
  if (name === 'galeria') renderGallery();
  if (name === 'educacion') {
    renderEducacionGallery();
    document.getElementById('eduSearchBox').value = '';
    document.getElementById('wikiSummary').innerHTML = '';
  }
}

function closePanel() {
  document.querySelectorAll('.panel').forEach(p => p.classList.remove('active'));
  document.getElementById('modalBackdrop').classList.remove('active');
}

// Eventos de botones
document.getElementById('btn-procedimientos').onclick = () => showPanel('procedimientos');
document.getElementById('btn-enfermedades').onclick = () => showPanel('enfermedades');
document.getElementById('btn-interacciones').onclick = () => showPanel('interacciones');
document.getElementById('btn-combinador').onclick = () => showPanel('combinador');
document.getElementById('btn-galeria').onclick = () => showPanel('galeria');
document.getElementById('btn-educacion').onclick = () => showPanel('educacion');

// Cerrar con backdrop
document.getElementById('modalBackdrop').onclick = closePanel;

// Cerrar con botón X
document.querySelectorAll('.close-btn').forEach(btn => {
  btn.onclick = closePanel;
});

// Procedimientos nav
document.querySelectorAll('#panel-procedimientos .panel-nav button').forEach(btn => {
  btn.onclick = function() {
    document.querySelectorAll('#panel-procedimientos .panel-nav button').forEach(b => b.classList.remove('active'));
    btn.classList.add('active');
    renderProcedimientos(btn.dataset.sub);
    renderProcedimientosGallery(btn.dataset.sub);
  };
});

// Enfermedades nav
document.querySelectorAll('#panel-enfermedades .panel-nav button').forEach(btn => {
  btn.onclick = function() {
    document.querySelectorAll('#panel-enfermedades .panel-nav button').forEach(b => b.classList.remove('active'));
    btn.classList.add('active');
    renderEnfermedades(btn.dataset.sub);
    renderEnfermedadesGallery(btn.dataset.sub);
  };
});

// Interacciones nav
document.querySelectorAll('#panel-interacciones .panel-nav button').forEach(btn => {
  btn.onclick = function() {
    document.querySelectorAll('#panel-interacciones .panel-nav button').forEach(b => b.classList.remove('active'));
    btn.classList.add('active');
    renderInteracciones(btn.dataset.sub);
    renderInteraccionesGallery(btn.dataset.sub);
  };
});

// Procedimientos panel
function renderProcedimientos(sub) {
  let html = '<ul style="margin: 0; padding-left: 20px;">';
  (procedimientos[sub] || []).forEach(p => {
    const icon = p.nivel === 'fatal' ? '⛔' : p.nivel === 'moderate' ? '⚠️' : '✅';
    html += `<li class="${p.nivel}" style="margin: 12px 0; padding-left: 6px;"><b>${p.titulo}</b>: ${p.desc} <span style="margin-left: 8px;">${icon}</span></li>`;
  });
  html += '</ul>';
  document.getElementById('procedimientos-content').innerHTML = html;
}

function renderProcedimientosGallery(sub) {
  let html = '';
  (procedimientos[sub] || []).forEach(p => {
    html += `
      <div class="panel-img-block ${p.nivel}">
        <img src="${p.img}" alt="${p.titulo}">
        <div class="panel-img-caption">${p.titulo}</div>
      </div>`;
  });
  document.getElementById('procedimientos-gallery').innerHTML = html;
}

// Enfermedades panel
function renderEnfermedades(sub) {
  let html = '<ul style="margin: 0; padding-left: 20px;">';
  (enfermedades[sub] || []).forEach(e => {
    const icon = e.nivel === 'fatal' ? '⛔' : e.nivel === 'moderate' ? '⚠️' : '✅';
    html += `<li class="${e.nivel}" style="margin: 12px 0; padding-left: 6px;"><b>${e.titulo}</b>: ${e.desc} <span style="margin-left: 8px;">${icon}</span></li>`;
  });
  html += '</ul>';
  document.getElementById('enfermedades-content').innerHTML = html;
}

function renderEnfermedadesGallery(sub) {
  let html = '';
  (enfermedades[sub] || []).forEach(e => {
    html += `
      <div class="panel-img-block ${e.nivel}">
        <img src="${e.img}" alt="${e.titulo}">
        <div class="panel-img-caption">${e.titulo}</div>
      </div>`;
  });
  document.getElementById('enfermedades-gallery').innerHTML = html;
}

// Interacciones panel
function renderInteracciones(sub) {
  let html = '<ul style="margin: 0; padding-left: 20px;">';
  (interaccionesCat[sub] || []).forEach(i => {
    const icon = i.nivel === 'fatal' ? '⛔' : '⚠️';
    html += `<li class="${i.nivel}" style="margin: 12px 0; padding-left: 6px;"><b>${i.comb}</b>: ${i.desc} <span style="margin-left: 8px;">${icon}</span></li>`;
  });
  html += '</ul>';
  document.getElementById('interacciones-content').innerHTML = html;
}

function renderInteraccionesGallery(sub) {
  let html = '';
  (interaccionesCat[sub] || []).forEach(i => {
    html += `
      <div class="panel-img-block ${i.nivel}">
        <img src="${i.img}" alt="${i.comb}">
        <div class="panel-img-caption">${i.comb}</div>
      </div>`;
  });
  document.getElementById('interacciones-gallery').innerHTML = html;
}

// Combinador
function buscarInteraccionCat(categoria, a, b) {
  let arr = categoria === "todos"
    ? Object.values(interaccionesCat).flat()
    : interaccionesCat[categoria] || [];
  
  const aLower = a.toLowerCase().trim();
  const bLower = b.toLowerCase().trim();
  
  return arr.filter(i => {
    const combLower = i.comb.toLowerCase();
    return (combLower.includes(aLower) && combLower.includes(bLower));
  });
}

document.getElementById('checkComb').onclick = () => {
  const cat = document.getElementById('combCategoria').value;
  const a = document.getElementById('medA').value.trim();
  const b = document.getElementById('medB').value.trim();
  
  if (!a || !b) {
    document.getElementById('comb-result').innerHTML = '<div style="color: var(--red-700); font-weight: 500;">Por favor, ingrese dos medicamentos para verificar</div>';
    return;
  }
  
  const res = buscarInteraccionCat(cat, a, b);
  
  if (res.length === 0) {
    document.getElementById('comb-result').innerHTML = 
      '<div style="color:var(--green-700); font-weight: 500; background: var(--green-50); padding: var(--spacer-sm) var(--spacer-md); border-radius: var(--shapes-corner-sm); border: 1px solid var(--green-300); border-left: 4px solid var(--green-600);">No se detectaron interacciones graves en la base local. Consulte siempre con farmacología.</div>';
    return;
  }
  
  document.getElementById('comb-result').innerHTML = res.map(r => {
    const icon = r.nivel === 'fatal' ? '⛔' : '⚠️';
    return `<div class="${r.nivel}" style="padding: var(--spacer-sm) var(--spacer-md); margin-bottom: var(--spacer-sm); border-radius: var(--shapes-corner-sm); border: 1px solid; border-left: 4px solid; background: ${r.nivel === 'fatal' ? 'var(--red-50)' : r.nivel === 'moderate' ? 'var(--yellow-50)' : 'var(--green-50)'}; border-color: ${r.nivel === 'fatal' ? 'var(--red-300)' : r.nivel === 'moderate' ? 'var(--yellow-300)' : 'var(--green-300)'}; border-left-color: ${r.nivel === 'fatal' ? 'var(--red-600)' : r.nivel === 'moderate' ? 'var(--yellow-600)' : 'var(--green-600)'};">
      <span style="margin-right: 8px;">${icon}</span>
      <b>${r.comb}</b>: ${r.desc}
    </div>`;
  }).join('');
};

function renderAllInterList() {
  let arr = Object.values(interaccionesCat).flat();
  document.getElementById('all-inter-list').innerHTML =
    arr.map(i => {
      const icon = i.nivel === 'fatal' ? '⛔' : '⚠️';
      return `<div class="${i.nivel}" style="padding: var(--spacer-xs) var(--spacer-sm); margin-bottom: var(--spacer-xs); border-radius: var(--shapes-corner-sm); background: ${i.nivel === 'fatal' ? 'var(--red-50)' : 'var(--yellow-50)'}; border-left: 4px solid ${i.nivel === 'fatal' ? 'var(--red-600)' : 'var(--yellow-600)'};">
        <span style="margin-right: 8px;">${icon}</span>
        <b>${i.comb}</b>: ${i.desc}
      </div>`;
    }).join('');
}

// Galería principal
function renderGallery() {
  let html = '';
  galleryImgs.forEach(img => {
    html += `
      <div class="panel-img-block ${img.nivel}">
        <div class="level-badge">${img.nivel === 'fatal' ? 'F' : img.nivel === 'moderate' ? 'M' : 'L'}</div>
        <img src="${img.src}" alt="${img.caption}">
        <div class="panel-img-caption">${img.caption}</div>
      </div>`;
  });
  document.getElementById('galleryGrid').innerHTML = html;
}

// Educación galería
function renderEducacionGallery() {
  let html = '';
  educacionImgs.forEach(img => {
    html += `
      <div class="panel-img-block">
        <img src="${img.src}" alt="${img.caption}">
        <div class="panel-img-caption">${img.caption}</div>
      </div>`;
  });
  document.getElementById('educacion-gallery').innerHTML = html;
}

// Educación búsqueda Wikipedia (opcional)
document.getElementById('eduSearchBox').oninput = function(e) {
  const q = e.target.value.trim();
  if (q.length < 3) {
    document.getElementById('educacion-content').innerHTML = '';
    document.getElementById('wikiSummary').innerHTML = '';
    return;
  }
  
  // Mostrar carga
  document.getElementById('educacion-content').innerHTML = '<div style="color: var(--on-surface-variant); font-style: italic;">Buscando información sobre "' + q + '"...</div>';
  
  fetch(`https://es.wikipedia.org/api/rest_v1/page/summary/${encodeURIComponent(q)}`)
    .then(r => r.ok ? r.json() : Promise.reject(new Error('No encontrado')))
    .then(data => {
      if (data && data.extract) {
        document.getElementById('wikiSummary').innerHTML =
          `<b>Información de Wikipedia:</b> ${data.extract.substring(0, 300)}...<br>
          <a href="https://es.wikipedia.org/wiki/${encodeURIComponent(q)}" target="_blank">Leer más en Wikipedia</a>`;
      } else {
        document.getElementById('wikiSummary').innerHTML = 'No se encontró información disponible sobre este tema.';
      }
    })
    .catch(() => {
      document.getElementById('wikiSummary').innerHTML = 'No se encontró información disponible sobre este tema. Intente con otra búsqueda.';
    });
};

// Preload images for better UX
function preloadImages() {
  const images = [
    'https://placehold.co/300x200/4ecdc4/ffffff?text=Lavado+de+manos',
    'https://placehold.co/300x200/ff6b6b/ffffff?text=No+Lavar+Manos',
    'https://placehold.co/300x200/45b7d1/ffffff?text=RCP',
    'https://placehold.co/300x200/f9ca24/ffffff?text=Diabetes',
    'https://placehold.co/300x200/6c5ce7/ffffff?text=Inhalador',
    'https://placehold.co/300x200/e84393/ffffff?text=ECG'
  ];
  
  images.forEach(src => {
    const img = new Image();
    img.src = src;
  });
}

// Iniciar preloading al cargar
document.addEventListener('DOMContentLoaded', preloadImages);
</script>
</body>
</html>
